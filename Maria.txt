-- cmd에서 MariaDB 접속
mysql -uroot -p
[ pw 입력 ]

-- 데이터베이스 확인
show databases;

-- 데이터베이스 내에 테이블 조회
show tables;

-- 데이터베이스 접속
use [ 데이터베이스 사용자명 ];
use intern;

-- 경고문 발생시 경고내용 보기
show warnings;

-- 데이터베이스 생성
create database [ 데이터베이스명 ];
create database intern;

-- 데이터베이스 삭제
drop database 이름;

-- 테이블 삭제
drop table [ 테이블명 ];

-- information 테이블 생성
-- id를 기본키로 중복 비허용
create table information(
	power varchar(50),
	name varchar(50) not null,
	id varchar(50),
	pw varchar(50) not null,
	phone varchar(50) not null,
	gender varchar(50) not null,
	age varchar(50) not null,
	primary key (id) );

-- 회원정보 삽입
insert into information values ('manager', 'kimsubin', 'kimsubin', 'kimsubin', '01073676013', 'Female', 'Twenties');
insert into information values ('staff', 'staff', 'staff', 'staff', '01011111111', 'Male', 'Twenties');

-- 회원정보 조회
select * from information
	where id = 'id'
	and pw = 'pw';

-- product 테이블 생성
-- 시리얼 코드 : primary key
-- 제품 수량, 유통기간 : server 처리 시 Type을 int로 변환해야 함
create table product(
	name varchar(50),
	id varchar(50),
	code varchar(50),
	quantity varchar(50),
	price varchar(50),
	registerdate date,
	period varchar(50),
	primary key (code)
);

-- expirydate 테이블 생성
create table expirydate(
	code varchar(50),
	foreign key (code) references product (code),
	expirydate date
);

제품명
제품 ID
제품 시리얼 코드
수량
가격
등록일자
유통기간

유통기한

-- 제품 정보 삽입
-- 등록일자 : 현재 오늘 날짜
insert into product values ('sandwich', 'sandwich', 'sandwich220603062001', 30, '2000', now(), 7 );

-- 유통기한 구하기
select date_add(

(select registerdate from product
where code = 'code'),

interval

(select period from product
where code = 'code')

day);

-- 유통기한 정보 삽입
insert into expirydate values (
'[ code 값 ]',
(
select date_add(

(select registerdate from product
where code = '[ code 값 ]'),

interval

(select period from product
where code = '[ code 값 ]')

day)
)
);

insert into expirydate values (
'sandwich220603062001',
(
select date_add(

(select registerdate from product
where code = 'sandwich220603062001'),

interval

(select period from product
where code = 'sandwich220603062001')

day)
)
);

-- 유통기한 정보 조회
select * from expirydate;

-- productSale 테이블 생성
-- 판매 정보
create table productSale(
	type varchar(50),
	date date,
	name varchar(50),
	quantity varchar(50),
	price varchar(50),
	genber varchar(50)
);

판매 타입
판매 날짜
제품명
수량
가격
성별

-- 판매 정보 삽입
-- 직원 주문일 경우
insert into product values ('staff', now(), 'sandwich', 22, '2000', 'Male');
-- 고객 주문일 경우

-- 권한 업데이트
update information
set power = '[ 바꿀 권한 ]'
where id = '[ 회원 ID ]';

-- 제품 정보 테이블과 유통기한 테이블 조인 조회
select p.name, p.id, p.code, p.quantity, p.price, p.registerdate, p.period, e.expirydate
	from product as p
	inner join expirydate as e
	on p.code = e.code;